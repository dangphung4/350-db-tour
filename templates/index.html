{% extends "base.html" %}

{% block title %}Frameworks and Libraries{% endblock %}

{% block content %}
<div class="px-4 py-6 sm:px-0">
    <h1 class="text-3xl font-bold mb-8 text-gray-100">Frameworks and Libraries</h1>
    
    <form method="get" action="{{ url_for('index') }}" class="mb-8">
        <div class="flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4">
            <div class="flex-1">
                <label for="language" class="block text-sm font-medium text-gray-300 mb-1">Language:</label>
                <select name="language" id="language" class="mt-1 block w-full pl-3 pr-10 py-2 text-base bg-dark-accent border-dark-secondary focus:outline-none focus:ring-light-accent focus:border-light-accent sm:text-sm rounded-md text-gray-300">
                    <option value="All" {% if selected_language == 'All' %}selected{% endif %}>All</option>
                    {% for language in languages %}
                        <option value="{{ language['name'] }}" {% if selected_language == language['name'] %}selected{% endif %}>
                            {{ language['name'] }}
                        </option>
                    {% endfor %}
                </select>
            </div>
            
            <div class="flex-1">
                <label for="type" class="block text-sm font-medium text-gray-300 mb-1">Type:</label>
                <select name="type" id="type" class="mt-1 block w-full pl-3 pr-10 py-2 text-base bg-dark-accent border-dark-secondary focus:outline-none focus:ring-light-accent focus:border-light-accent sm:text-sm rounded-md text-gray-300">
                    <option value="All" {% if selected_type == 'All' %}selected{% endif %}>All</option>
                    {% for type in types %}
                        <option value="{{ type['type'] }}" {% if selected_type == type['type'] %}selected{% endif %}>
                            {{ type['type'] }}
                        </option>
                    {% endfor %}
                </select>
            </div>
            
            <div class="flex items-end">
                <button type="submit" class="w-full sm:w-auto bg-light-accent text-white px-4 py-2 rounded-md hover:bg-opacity-80 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-light-accent transition-colors duration-200">
                    Filter
                </button>
            </div>
        </div>
    </form>
    
    <div class="bg-dark-secondary shadow overflow-hidden sm:rounded-lg">
        <table class="min-w-full divide-y divide-dark-accent">
            <thead class="bg-dark-accent">
                <tr>
                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">
                        <a href="{{ url_for('index', sort='name', order=order, language=selected_language, type=selected_type) }}" class="hover:text-light-accent">Name</a>
                    </th>
                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">
                        <a href="{{ url_for('index', sort='type', order=order, language=selected_language, type=selected_type) }}" class="hover:text-light-accent">Type</a>
                    </th>
                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">
                        <a href="{{ url_for('index', sort='language_name', order=order, language=selected_language, type=selected_type) }}" class="hover:text-light-accent">Language</a>
                    </th>
                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">
                        <a href="{{ url_for('index', sort='latest_version', order=order, language=selected_language, type=selected_type) }}" class="hover:text-light-accent">Latest Version</a>
                    </th>
                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">
                        <a href="{{ url_for('index', sort='github_stars', order=order, language=selected_language, type=selected_type) }}" class="hover:text-light-accent">GitHub Stars</a>
                    </th>
                </tr>
            </thead>
            <tbody class="bg-dark-secondary divide-y divide-dark-accent">
                {% for framework in frameworks %}
                <tr class="hover:bg-dark-accent transition-colors duration-200">
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-300">
                        <a href="{{ url_for('edit_framework', id=framework['id']) }}" class="text-light-accent hover:text-white">{{ framework['name'] }}</a>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-400">{{ framework['type'] }}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-400">{{ framework['language_name'] }}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-400">{{ framework['latest_version'] }}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-400">{{ framework['github_stars'] }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    
    <div class="mt-4 flex justify-center space-x-4">
        <a href="{{ url_for('add_data') }}" class="px-4 py-2 bg-light-accent text-white rounded-md hover:bg-opacity-80 transition-colors duration-200">Add New Framework/Library</a>
    </div>
    
    <div class="mt-4 flex justify-center">
        {% if page > 1 %}
            <a href="{{ url_for('index', page=page-1, language=selected_language, type=selected_type, sort=sort, order=order) }}" class="px-3 py-2 bg-dark-accent text-gray-300 rounded-l hover:bg-light-accent hover:text-white transition-colors duration-200">Previous</a>
        {% endif %}
        
        <span class="px-3 py-2 bg-dark-secondary text-gray-300">Page {{ page }} of {{ total_pages }}</span>
        
        {% if page < total_pages %}
            <a href="{{ url_for('index', page=page+1, language=selected_language, type=selected_type, sort=sort, order=order) }}" class="px-3 py-2 bg-dark-accent text-gray-300 rounded-r hover:bg-light-accent hover:text-white transition-colors duration-200">Next</a>
        {% endif %}
    </div>
</div>
{% endblock %}
